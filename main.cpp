#include <iostream>
#include <stdlib.h>

#include "run/env.h"

int main(int argc, char *argv[]) {
	// Program to calculate (10 * 4) / 3
	u_char opcodes[] = {
		OP_ALLOC,	0x01,0x00,0x00,0x80,
		OP_MOVI,	0x01,0x00,0x00,0x80, 0x04,0x00,0x00,0x00,
		OP_ALLOC,	0x02,0x00,0x00,0x80,
		OP_MOVI, 	0x02,0x00,0x00,0x80, 0x0A,0x00,0x00,0x00,
		OP_ALLOC,	0x03,0x00,0x00,0x80,
		OP_MOVI, 	0x03,0x00,0x00,0x80, 0x03,0x00,0x00,0x00,

		OP_PUSH, 	0x03,0x00,0x00,0x80,
		OP_PUSH,	0x01,0x00,0x00,0x80,
		OP_PUSH, 	0x02,0x00,0x00,0x80,

		OP_MUL,
		OP_DIV,

		OP_EXIT,
	};

	Environment env(opcodes, 40);
	env.Execute();

	return 0;
}