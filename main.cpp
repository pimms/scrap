#include <iostream>
#include <stdlib.h>

#include "run/env.h"

int main(int argc, char *argv[]) {
	byte opcodes[40] = {
		OP_ALLOC,	0x01,0x00,0x00,0x80,
		OP_MOVI,	0x01,0x00,0x00,0x80, 0x04,0x00,0x00,0x00,
		OP_ALLOC,	0x02,0x00,0x00,0x80,
		OP_MOVI, 	0x02,0x00,0x00,0x80, 0x0A,0x00,0x00,0x00,
		OP_PUSH,	0x01,0x00,0x00,0x80,
		OP_PUSH, 	0x02,0x00,0x00,0x80,
		OP_MUL,
		OP_EXIT,
	};

	Environment env(opcodes);
	int retval = env.Execute();

	printf("Program terminated with status %i.\n", retval);
	getchar();

	return retval;
}